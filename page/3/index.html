<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    <meta name="referrer" content="no-referrer"/>
    



<meta name="twitter:title" content="迁移自(blog.csdn.net/xiaobin_HLJ80)"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@"/>



  	<meta property="og:title" content="迁移自(blog.csdn.net/xiaobin_HLJ80) &middot; 迁移自(blog.csdn.net/xiaobin_HLJ80)" />
  	<meta property="og:site_name" content="迁移自(blog.csdn.net/xiaobin_HLJ80)" />
  	<meta property="og:url" content="https://tdtc-hrb.github.io/csdn/" />

    
        
    

    
    <meta property="og:type" content="website" />
    <meta property="og:description" content="" />
    

    <title>迁移自(blog.csdn.net/xiaobin_HLJ80) &middot; 迁移自(blog.csdn.net/xiaobin_HLJ80)</title>

    
    <meta name="description" content="" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/csdn/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/csdn/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/csdn/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/csdn/css/nav.css" />

    

    

    
      
          <link href="/csdn/index.xml" rel="alternate" type="application/rss+xml" title="迁移自(blog.csdn.net/xiaobin_HLJ80)" />
      
      
        <link href='/csdn/index.xml' rel="alternate" type="application/rss+xml" title="迁移自(blog.csdn.net/xiaobin_HLJ80) &middot; 迁移自(blog.csdn.net/xiaobin_HLJ80)" />
      
    
    <meta name="generator" content="Hugo 0.154.3">

    <link rel="canonical" href="https://tdtc-hrb.github.io/csdn/" />

    
      
    
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Person",
        "name":  null ,
        
        "url":  null ,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "url": "https://tdtc-hrb.github.io/csdn/",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://tdtc-hrb.github.io/csdn/"
    },
    "description":  null 
}
  </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/csdn/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




	<header class="main-header tag-head no-cover">

    <nav class="main-nav overlay clearfix">
      
      
        
          <a class="menu-button icon-feed" href='/csdn/index.xml'>&nbsp;&nbsp;Subscribe</a>
        
      
    </nav>
    <div class="vertical">
        <div class="main-header-content inner">
            <h1 class="page-title">迁移自(blog.csdn.net/xiaobin_HLJ80)</h1>
            <h2 class="page-description">
                
            </h2>
        </div>
    </div>
</header>

<main class="content" role="main">
    

	<div class="extra-pagination inner">
    <nav class="pagination" role="navigation">
	
	    <a class="newer-posts" href="/csdn/page/2/">&larr; Newer Posts</a>
	
	<span class="page-number">Page 3 of 12</span>
	
	    <a class="older-posts" href="/csdn/page/4/">Older Posts &rarr;</a>
	
</nav>

	</div>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/version-ubuntu/">查看版本-Ubuntu</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><p>Note: Migrate to Debian before Ubuntu 20.04 ends support (April, 2025).</p>
<h1 id="components-version">components version</h1>
<p>查看内核版本:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#uname -a</span>
</span></span></code></pre></div><h2 id="查看glibc库版本">查看Glibc库版本</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#apt-cache show libc6</span>
</span></span></code></pre></div><h2 id="查看binutils版本">查看binutils版本</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#ld -v</span>
</span></span></code></pre></div><h1 id="查看ubuntu版本号">查看ubuntu版本号</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#cat /etc/issue</span>
</span></span></code></pre></div><h2 id="查看debian对应版本">查看debian对应版本</h2>
<pre tabindex="0"><code>#cat /etc/debian_version
</code></pre><h3 id="debian-code-name"><a href="https://www.debian.org/releases/">debian code name</a></h3>
<table>
  <thead>
      <tr>
          <th>code</th>
          <th>version</th>
          <th>status</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>bullseye</td>
          <td>11</td>
          <td>statble</td>
      </tr>
      <tr>
          <td>buster</td>
          <td>10</td>
          <td>old statble</td>
      </tr>
      <tr>
          <td>stretch</td>
          <td>9</td>
          <td>old old statble</td>
      </tr>
      <tr>
          <td>jessie</td>
          <td>8</td>
          <td>archived</td>
      </tr>
      <tr>
          <td>wheezy</td>
          <td>7</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>squeeze</td>
          <td>6.0</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>lenny</td>
          <td>5.0</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>etch</td>
          <td>4.0</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>sarge</td>
          <td>3.1</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>woody</td>
          <td>3.0</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>potato</td>
          <td>2.2</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>slink</td>
          <td>2.1</td>
          <td>obsolete</td>
      </tr>
      <tr>
          <td>hamm</td>
          <td>2.0</td>
          <td>obsolete</td>
      </tr>
  </tbody>
</table> <a class="read-more" href="/csdn/post/version-ubuntu/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        on
            
                <a href="https://tdtc-hrb.github.io/csdn//tags/glibc/">#Glibc</a>,
            
                <a href="https://tdtc-hrb.github.io/csdn//tags/sh/">#sh</a>,
            
                <a href="https://tdtc-hrb.github.io/csdn//tags/binutils/">#binutils</a>,
            
                <a href="https://tdtc-hrb.github.io/csdn//tags/system/">#system</a>,
            
        
        <time class="post-date" datetime="2024-03-01T02:12:39&#43;08:00">
            1 Mar 2024
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/dp-cor-java/">Chain of Command 模式</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><p>我们知道Chain of Responsibility模式，其实就是Template method + Next。</p>
<p>在进行多个调用时，按顺序执行；需要调用2个方法。</p>
<p>此模式，只适合抽象方法！</p>
<p>在进行设计模式的程序实现中xiaobin使用已编写的SSL程序做演示。</p>
<p><img src="https://github.com/tdtc-hrb/csdn/raw/master/images/chain-of-command.png" alt="chain of command"></p>
<h2 id="chain-of-command">Chain of Command</h2>
<pre tabindex="0"><code>import com.cartionsoft.xbf.ContentXbf;
import com.cartionsoft.xbf.LibXbf;
import com.cartionsoft.xbf.ReadXbf;
import com.cartionsoft.xbf.XiaobinFile;

public class Demo {

	public static void init() throws Exception {
		int stationID = 0;
	    String keyPWD;

		String libPath = &#34;xbfLibR.dll&#34;;
		String xbfPath = &#34;C://send//dySSL.xbf&#34;;

		ContentXbf contentXbf = new ContentXbf(xbfPath);

        // All checks are linked. Client can build various chains using the same
        // components.
        XiaobinFile xiaobinFile = XiaobinFile.link(
            new LibXbf(libPath),
            new ReadXbf()
        );

        // Server gets a chain from client code.
        contentXbf.setXbf(xiaobinFile);
        
        stationID = contentXbf.getStationID(-1);
        keyPWD = contentXbf.getKeyPWD(-1);
        
        System.out.println(keyPWD + &#34; : &#34; + stationID);
	}

	public static void main(String[] args) throws Exception {
		// TODO Auto-generated method stub
		init();
	}

}
</code></pre><ul>
<li>template-method(abstract)</li>
</ul>
<pre tabindex="0"><code>readRecord()
</code></pre><ul>
<li>Next</li>
</ul>
<pre tabindex="0"><code>readRecordNext()
</code></pre><ul>
<li>traverse</li>
</ul>
<pre tabindex="0"><code>link()
</code></pre><h3 id="next">Next</h3>
<pre tabindex="0"><code>	/**
     * Runs readRecord on the next object in chain or ends traversing if we&#39;re in
     * last object in chain.
     */
    protected String readRecordNext(int dimRecord, String filename) {
        if (next == null) {
            return &#34;&#34;;
        }
        return next.readRecord(dimRecord, filename);
    }
</code></pre><h3 id="link">link</h3>
<pre tabindex="0"><code>    /**
     * Builds chains of XiaobinFile objects.
     */
    public static XiaobinFile link(XiaobinFile first, XiaobinFile... chain) {
    	XiaobinFile head = first;
        for (XiaobinFile nextInChain: chain) {
            head.next = nextInChain;
            head = nextInChain;
        }
        return first;
    }
</code></pre> <a class="read-more" href="/csdn/post/dp-cor-java/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-12-22T12:08:08&#43;08:00">
            22 Dec 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/dp-template-java/">模板方法模式</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><p>我们知道模板方法模式，其实就是等待被实现的方法。</p>
<p>在进行多个可选择调用时，可以根据不同的方式；只调用一个方法即可解决不同的实现。</p>
<p>此模式，只适合抽象方法！</p>
<p>在进行设计模式的程序实现中xiaobin使用已编写的SSL程序做演示。</p>
<p><img src="https://github.com/tdtc-hrb/cnblogs/raw/master/images/template-method.png" alt="template method"></p>
<h2 id="template-method">Template Method</h2>
<pre tabindex="0"><code>import java.io.*;
import java.util.*;
import javax.net.ssl.*;

public abstract class Transmission {

	protected String host;
	protected int port;
	protected String keyPath;
	protected String keyPwd;
	
	private SSLSocket socket;
	
	protected abstract SSLSocket createSocket() throws Exception;
	
	/**
	 * &lt;p&gt; Receive byte array data &lt;/p&gt;
	 * @return data
	 */
	public byte[] receiveData() throws Exception {
		// TODO Auto-generated method stub
		socket = createSocket();
		
		InputStream in = new BufferedInputStream(
				socket.getInputStream());
		int b;
		List&lt;Byte&gt; listBuffer = new ArrayList&lt;Byte&gt;();
		while((b = in.read()) != -1) {
			listBuffer.add((byte) b);
		}
		
		int i = 0;
		byte[] data = new byte[listBuffer.size()];
		for (Byte byte1 : listBuffer) {
			data[i] = byte1;
			i++;
		}

		in.close();
		
		return data;
	}
	
	/**
	 * &lt;p&gt; Send byte array data &lt;/p&gt;
	 * @param data
	 */
	public void sendData(byte[] data) throws Exception {
		socket = createSocket();
		OutputStream out = new BufferedOutputStream(
				socket.getOutputStream());
		out.write(data);
		out.flush();
		out.close();
	}
}
</code></pre><p>template-method(abstract):</p> <a class="read-more" href="/csdn/post/dp-template-java/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-12-08T12:08:08&#43;08:00">
            8 Dec 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/c-automake/">生成makefile</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><ul>
<li>automake</li>
<li>manual make</li>
</ul>
<h1 id="automake">automake</h1>
<p>注意: am文件是需要手工创建的!</p>
<h2 id="ac文件">ac文件</h2>
<p>生成configure.scan文件, 并重命名为configure.ac</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ autoscan
</span></span><span style="display:flex;"><span>$ mv configure.scan configure.ac
</span></span></code></pre></div><h3 id="修改配置">修改配置</h3>
<p>注意: 所有新修改的值都需要方括号([])</p>
<ul>
<li>程序属性</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AC_INIT<span style="color:#f92672">([</span>hex2int<span style="color:#f92672">]</span>, <span style="color:#f92672">[</span>v0.1<span style="color:#f92672">]</span>, <span style="color:#f92672">[</span>veic_2005@163.com<span style="color:#f92672">])</span>
</span></span></code></pre></div><ul>
<li>目录结构
如果只有本目录, 使用空值</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AM_INIT_AUTOMAKE
</span></span></code></pre></div><ul>
<li>检查编译器
<a href="http://www.adp-gmbh.ch/misc/tools/configure/configure_in.html#ac_prog_cc">C compiler</a>:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AC_PROG_CC
</span></span></code></pre></div><p><a href="http://www.adp-gmbh.ch/misc/tools/configure/configure_in.html#ac_prog_cxx">C++ compiler</a>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AC_PROG_CXX
</span></span></code></pre></div><ul>
<li><a href="https://www.gnu.org/software/autoconf/manual/autoconf-2.71/html_node/Configuration-Files.html">输出Makefile.in</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AC_CONFIG_FILES<span style="color:#f92672">([</span>Makefile<span style="color:#f92672">])</span>
</span></span></code></pre></div><ul>
<li>检查system头文件</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AC_CHECK_HEADERS<span style="color:#f92672">([</span>string.h<span style="color:#f92672">])</span>
</span></span></code></pre></div><h2 id="生成makefile">生成Makefile</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>aclocal
</span></span><span style="display:flex;"><span>autoconf
</span></span></code></pre></div><h3 id="自定义宏可选">自定义宏(可选)</h3>
<p>在ac file中的定义：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AC_CONFIG_HEADERS<span style="color:#f92672">([</span>config.h<span style="color:#f92672">])</span>
</span></span></code></pre></div><p>执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>autoheader
</span></span></code></pre></div><h3 id="输出makefile">输出Makefile</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>automake --add-missing
</span></span></code></pre></div><p>输出Makefile:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./configure
</span></span></code></pre></div><h2 id="example">Example</h2>
<p>源代码参见<a href="https://tdtc-hrb.github.io/csdn/post/c-string-h2i/">十六进制转十进制</a></p>
<ul>
<li>main.c <br>
只保留主程序入口</li>
<li>hex2int.c <br>
保留整个程序的结构</li>
<li>hex2int.h <br>
函数名声明</li>
</ul>
<h3 id="makefileam">Makefile.am</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>AUTOMAKE_OPTIONS<span style="color:#f92672">=</span>foreign
</span></span><span style="display:flex;"><span>bin_PROGRAMS<span style="color:#f92672">=</span>hex2int
</span></span><span style="display:flex;"><span>hex2int_SOURCES<span style="color:#f92672">=</span>main.c hex2int.c
</span></span><span style="display:flex;"><span>include_HEADERS<span style="color:#f92672">=</span>hex2int.h
</span></span></code></pre></div><h3 id="configureac">configure.ac</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#                                               -*- Autoconf -*-</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Process this file with autoconf to produce a configure script.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AC_PREREQ<span style="color:#f92672">([</span>2.71<span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>AC_INIT<span style="color:#f92672">([</span>hex2int<span style="color:#f92672">]</span>, <span style="color:#f92672">[</span>v0.1<span style="color:#f92672">]</span>, <span style="color:#f92672">[</span>veic_2005@163.com<span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>AM_INIT_AUTOMAKE
</span></span><span style="display:flex;"><span>AC_CONFIG_SRCDIR<span style="color:#f92672">([</span>hex2int.c<span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>AC_CONFIG_HEADERS<span style="color:#f92672">([</span>config.h<span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Checks for programs.</span>
</span></span><span style="display:flex;"><span>AC_PROG_CC
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Checks for libraries.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Checks for header files.</span>
</span></span><span style="display:flex;"><span>AC_CHECK_HEADERS<span style="color:#f92672">([</span>string.h<span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Checks for typedefs, structures, and compiler characteristics.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Checks for library functions.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>AC_CONFIG_FILES<span style="color:#f92672">([</span>Makefile<span style="color:#f92672">])</span>
</span></span><span style="display:flex;"><span>AC_OUTPUT
</span></span></code></pre></div><h1 id="手动makefile">手动Makefile</h1>
<blockquote>
<p>小项目可以。
注意：所有的命令前必须为TAB，不能使空格！</p> <a class="read-more" href="/csdn/post/c-automake/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-08-08T02:20:39&#43;08:00">
            8 Aug 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/java-grammar/">java的grammar</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><ul>
<li>JDK8 <br>
At least May 2026 for Eclipse Adoptium</li>
<li>JDK17 <br>
At least Oct 2027 for <a href="https://adoptium.net/support/">Eclipse Adoptium</a></li>
<li>JDK21</li>
</ul>
<h1 id="java">Java</h1>
<h2 id="project-loom">Project Loom</h2>
<ul>
<li><a href="https://spring.io/blog/2023/09/09/all-together-now-spring-boot-3-2-graalvm-native-images-java-21-and-virtual">All together now: Spring Boot 3.2, GraalVM native images, Java 21, and virtual threads with Project Loom,</a></li>
</ul>
<h2 id="lambda">lambda</h2>
<p>我们使用实现Runnable的不同来做对比。</p>
<h3 id="java-7">java 7</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> my.csdn2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.ExecutorService;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.Executors;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RunnableThread</span> <span style="color:#66d9ef">implements</span> Runnable {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">mul</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		result <span style="color:#f92672">=</span> x <span style="color:#f92672">*</span> y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> result;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// TODO Auto-generated method stub</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 5; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0; j <span style="color:#f92672">&lt;</span> 5; j<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>				System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;x: &#34;</span> <span style="color:#f92672">+</span> i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; y: &#34;</span> <span style="color:#f92672">+</span> j <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; result: &#34;</span>);
</span></span><span style="display:flex;"><span>				System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(mul(i, j));
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">	 * @param args
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// TODO Auto-generated method stub</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// way 1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//		Thread rt = new Thread(new RunnableThread());</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//		rt.start();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// way 2</span>
</span></span><span style="display:flex;"><span>		ExecutorService exec <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newCachedThreadPool</span>();
</span></span><span style="display:flex;"><span>		exec.<span style="color:#a6e22e">execute</span>(<span style="color:#66d9ef">new</span> RunnableThread());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="java8">java8</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> my.csdn2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.ExecutorService;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.concurrent.Executors;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RunnableLambdaExample</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">mul</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		result <span style="color:#f92672">=</span> x <span style="color:#f92672">*</span> y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> result;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// TODO Auto-generated method stub</span>
</span></span><span style="display:flex;"><span>		RunnableLambdaExample rle <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> RunnableLambdaExample();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		Runnable task1 <span style="color:#f92672">=</span> () <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 5; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> 0; j <span style="color:#f92672">&lt;</span> 5; j<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>					System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;x: &#34;</span> <span style="color:#f92672">+</span> i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; y: &#34;</span> <span style="color:#f92672">+</span> j <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; result: &#34;</span>);
</span></span><span style="display:flex;"><span>					System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(rle.<span style="color:#a6e22e">mul</span>(i, j));
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// way 1</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//Thread rt = new Thread(task1);</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//rt.start();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// way 2</span>
</span></span><span style="display:flex;"><span>		ExecutorService exec <span style="color:#f92672">=</span> Executors.<span style="color:#a6e22e">newCachedThreadPool</span>();
</span></span><span style="display:flex;"><span>		exec.<span style="color:#a6e22e">execute</span>(task1);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="scala">Scala</h1>
<p>在Scala把类和对象明确的分开了。 <br>
Class相当于模板；Object是Class的实现。</p> <a class="read-more" href="/csdn/post/java-grammar/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-08-08T02:09:28&#43;08:00">
            8 Aug 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/mysql-mdb-v104/">安装 MariaDB 10.3/10.4(MySQL 5.7)数据库</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><ul>
<li>OS <br>
CentOS v7.9(2009)</li>
<li><a href="https://mariadb.com/kb/en/mariadb-vs-mysql-compatibility/">MariaDB</a>
<table>
  <thead>
      <tr>
          <th>MariaDB</th>
          <th>MySQL</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>v10.2/3/4</td>
          <td>v5.7</td>
      </tr>
      <tr>
          <td>v10.0/1</td>
          <td>v5.6</td>
      </tr>
      <tr>
          <td>v5.5</td>
          <td>v5.5</td>
      </tr>
  </tbody>
</table>
</li>
</ul>
<h1 id="1-准备安装">1. 准备安装</h1>
<blockquote>
<p>卸载旧版本Maria</p>
</blockquote>
<h2 id="1-查询">1) 查询</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#f92672">[</span>tdtc@localhost ~<span style="color:#f92672">]</span>$ sudo rpm -qa | grep mariadb
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>sudo<span style="color:#f92672">]</span> password <span style="color:#66d9ef">for</span> tdtc:
</span></span><span style="display:flex;"><span>mariadb-libs-5.5.68-1.el7.x86_64
</span></span></code></pre></div><h2 id="2-uninstall">2) uninstall</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo yum -y remove mariadb*
</span></span></code></pre></div><h1 id="2-install">2. install</h1>
<h2 id="step-1-add-mariadb-yum-repositories">Step 1: <a href="https://downloads.mariadb.org/mariadb/repositories">Add MariaDB Yum Repositories</a></h2>
<p>/etc/yum.repos.d/mariadb.repo:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># MariaDB 10.4 CentOS repository list - created 2023-08-26 09:24 UTC</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># https://mariadb.org/download/</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>mariadb<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> MariaDB
</span></span><span style="display:flex;"><span><span style="color:#75715e"># rpm.mariadb.org is a dynamic mirror if your preferred mirror goes offline. See https://mariadb.org/mirrorbits/ for details.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># baseurl = https://rpm.mariadb.org/10.4/centos/$releasever/$basearch</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># baseurl = https://mirrors.neusoft.edu.cn/mariadb/yum/10.4/centos/$releasever/$basearch ## neusoft</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## aliyun</span>
</span></span><span style="display:flex;"><span>baseurl <span style="color:#f92672">=</span> https://mirrors.aliyun.com/mariadb/yum/10.4/centos/$releasever/$basearch
</span></span><span style="display:flex;"><span>module_hotfixes <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># gpgkey = https://rpm.mariadb.org/RPM-GPG-KEY-MariaDB</span>
</span></span><span style="display:flex;"><span>gpgkey <span style="color:#f92672">=</span> https://mirrors.aliyun.com/mariadb/yum/RPM-GPG-KEY-MariaDB
</span></span><span style="display:flex;"><span>gpgcheck <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h2 id="step-2-install-mariadb-server">Step 2: Install MariaDB Server</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo yum install MariaDB-server MariaDB-client
</span></span></code></pre></div><ul>
<li>run</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl start mysql.service
</span></span></code></pre></div><h2 id="step-3-secure-mariadb-install">Step 3: Secure MariaDB Install</h2>
<blockquote>
<p>Default: Enter</p> <a class="read-more" href="/csdn/post/mysql-mdb-v104/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-08-06T01:08:39&#43;08:00">
            6 Aug 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/ops_grub_ubuntu/">grub救援模式</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><p>Note: Migrate to Debian before Ubuntu 20.04 ends support (April, 2025).</p>
<p>出现“grub rescue&gt;”提示符；也称grub救援模式。</p>
<h1 id="1-设置引导">1. 设置引导</h1>
<blockquote>
<p>(hd?,?)：安装的引导分区  <br>
在我的机器是(hd0, msdos3)</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>grub rescue&gt;ls
</span></span><span style="display:flex;"><span>grub rescue&gt;ls <span style="color:#f92672">(</span>hd?,?<span style="color:#f92672">)</span>/boot/grub
</span></span><span style="display:flex;"><span>grub rescue&gt;set root<span style="color:#f92672">(</span>hd?,?<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>grub rescue&gt;set prefix<span style="color:#f92672">=(</span>hd?,?<span style="color:#f92672">)</span>/boot/grub
</span></span></code></pre></div><h2 id="insmod">insmod</h2>
<p>one:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>insmod /boot/grub/normal.mod
</span></span><span style="display:flex;"><span>/boot/grub/normal
</span></span></code></pre></div><p>two:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>insmod normal
</span></span><span style="display:flex;"><span>normal
</span></span></code></pre></div><h1 id="2-更新grub">2. 更新grub</h1>
<p>在终端上执行：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo grub-install /dev/sda
</span></span><span style="display:flex;"><span>sudo update-grub
</span></span></code></pre></div> <a class="read-more" href="/csdn/post/ops_grub_ubuntu/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-03-15T00:19:08&#43;08:00">
            15 Mar 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/ops_vi/">简单使用vi</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><p>The default editor that comes with the UNIX operating system is called vi (visual editor).</p>
<p>The UNIX vi editor is a full screen editor and has two modes of operation:</p>
<ul>
<li>Command mode commands which cause action to be taken on the file, and</li>
<li>Insert mode in which entered text is inserted into the file.</li>
</ul>
<h1 id="insert-mode">Insert mode</h1>
<ul>
<li>正常使用</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ vi myfile
</span></span></code></pre></div><ul>
<li>恢复使用</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ vi -r myfile
</span></span></code></pre></div><p>恢复系统崩溃时正在编辑的文件名</p>
<p>要进行文字编辑工作, 按“i”即进入</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>i
</span></span></code></pre></div><h2 id="移动光标">移动光标</h2>
<p>使用方向键来进行位置的移动。</p> <a class="read-more" href="/csdn/post/ops_vi/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-03-10T09:28:08&#43;08:00">
            10 Mar 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/ops_data_transmission/">Linux与Windows互传数据</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><h1 id="一光盘">一、光盘</h1>
<p>制作ISO: <br>
打开UltralISO，把需要的文件拖拽过去即可。</p>
<h2 id="2-linux">2. Linux</h2>
<h3 id="1-look">1) look</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ls -l /dev | grep cdrom
</span></span></code></pre></div><h3 id="2-load">2) load</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mount /dev/cdrom /mnt/
</span></span></code></pre></div><h3 id="3-unload">3) unload</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo umount /mnt
</span></span></code></pre></div><h1 id="二scp">二、scp</h1>
<p>如果Windows没有SSH服务器，只能进行发送.</p>
<h2 id="发送">发送</h2>
<ul>
<li>Linux</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>scp /home/tdtc/go1.19.7.linux-amd64.tar.gz xiaobin@192.168.211.112:/D:<span style="color:#ae81ff">\w</span>ar
</span></span></code></pre></div><ul>
<li>Windows <br>
Windows的scp包含在putty工具中。</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pscp f:<span style="color:#ae81ff">\d</span>ocker-soft<span style="color:#ae81ff">\d</span>ocker-compose-Linux-x86_64 tdtc@192.168.211.131:/home/tdtc/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pscp f:<span style="color:#ae81ff">\d</span>ocker-soft<span style="color:#ae81ff">\p</span>rotobuf-cpp-3.21.12.tar.gz tdtc@192.168.211.131:/home/tdtc/
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>pscp f:<span style="color:#ae81ff">\d</span>ocker-soft<span style="color:#ae81ff">\g</span>o1.19.7.linux-amd64.tar.gz tdtc@192.168.211.131:/home/tdtc
</span></span></code></pre></div><h2 id="接收">接收</h2>
<p>注意：仅适用于win10.</p>
<ul>
<li>
<p>安装OpenSSH
<img src="https://gitee.com/xiaobin80/csdn/raw/master/images/20200222182445523.png" alt="添加功能">
开始菜单-》设置-》应用-》管理可选功能</p>
</li>
<li>
<p>开启OpenSSH
<img src="https://gitee.com/xiaobin80/csdn/raw/master/images/2020022218283850.png" alt="win info">
注意：关闭Windows防火墙或允许22端口。</p>
</li>
</ul> <a class="read-more" href="/csdn/post/ops_data_transmission/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-02-15T16:08:08&#43;08:00">
            15 Feb 2023
        </time>
    </footer>
</article>

	
	   <article class="post post">
    <header class="post-header">
        <h2 class="post-title"><a href="/csdn/post/c-bsd_socket/">unix网络的client和server</a></h2>
    </header>
    <section class="post-excerpt">
        
            <p><p>使用GNU Compiler Collection(GCC)编译的
一个简单的客户端和服务器端的程序！</p>
<h1 id="client-side">Client Side</h1>
<ul>
<li>flow chart</li>
</ul>
<pre tabindex="0"><code>  getaddrinfo() -&gt; socket() -&gt; connect() -&gt; recv()
</code></pre><ul>
<li>src</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sys/types.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sys/socket.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;arpa/inet.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;netdb.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define SERVIP   &#34;192.168.56.112&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define SERVPORT &#34;2349&#34;
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>argv[])
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">struct</span> addrinfo hints, <span style="color:#f92672">*</span>res;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> status;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> sockfd;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> connSta;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> recvSta;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">char</span> buffer[<span style="color:#ae81ff">1024</span>];
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> len;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">char</span> ipstr[INET_ADDRSTRLEN];
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>addr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (argc <span style="color:#f92672">!=</span> <span style="color:#ae81ff">3</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;Usage: Not Server IP And Port!&#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">memset</span>(<span style="color:#f92672">&amp;</span>hints, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span>(hints));
</span></span><span style="display:flex;"><span>	hints.ai_family <span style="color:#f92672">=</span> AF_UNSPEC;
</span></span><span style="display:flex;"><span>	hints.ai_socktype <span style="color:#f92672">=</span> SOCK_STREAM;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	status <span style="color:#f92672">=</span> <span style="color:#a6e22e">getaddrinfo</span>(argv[<span style="color:#ae81ff">1</span>], argv[<span style="color:#ae81ff">2</span>], <span style="color:#f92672">&amp;</span>hints, <span style="color:#f92672">&amp;</span>res);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (status <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;Error, Server IP And Port!&#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	sockfd <span style="color:#f92672">=</span> <span style="color:#a6e22e">socket</span>(res<span style="color:#f92672">-&gt;</span>ai_family, res<span style="color:#f92672">-&gt;</span>ai_socktype, res<span style="color:#f92672">-&gt;</span>ai_protocol);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (sockfd <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;Create, socket fail!&#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	connSta <span style="color:#f92672">=</span> <span style="color:#a6e22e">connect</span>(sockfd, res<span style="color:#f92672">-&gt;</span>ai_addr, res<span style="color:#f92672">-&gt;</span>ai_addrlen);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (connSta <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;Connect, Remote Host fail!&#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">struct</span> sockaddr_in <span style="color:#f92672">*</span>ipv4 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">struct</span> sockaddr_in <span style="color:#f92672">*</span>)res<span style="color:#f92672">-&gt;</span>ai_addr;
</span></span><span style="display:flex;"><span>		addr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>(ipv4<span style="color:#f92672">-&gt;</span>sin_addr);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">inet_ntop</span>(res<span style="color:#f92672">-&gt;</span>ai_family, addr, ipstr, <span style="color:#66d9ef">sizeof</span>(ipstr));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Linked: Host = %s, Port = %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, ipstr, <span style="color:#a6e22e">ntohs</span>(ipv4<span style="color:#f92672">-&gt;</span>sin_port));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	recvSta <span style="color:#f92672">=</span> <span style="color:#a6e22e">recv</span>(sockfd, buffer, <span style="color:#66d9ef">sizeof</span>(buffer), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">%s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, buffer);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">freeaddrinfo</span>(res);
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">close</span>(sockfd);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="server-side">Server Side</h1>
<ul>
<li>flow chart</li>
</ul>
<pre tabindex="0"><code>getaddrinfo() -&gt; socket() -&gt; bind() -&gt; listen() -&gt; accept() -&gt; send()
</code></pre><ul>
<li>src</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sys/types.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sys/socket.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;netdb.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;arpa/inet.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define SERVPORT &#34;2349&#34;
</span></span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>argv[])
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">struct</span> addrinfo hints, <span style="color:#f92672">*</span>res;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> status;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> sockfd;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> connFd;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">struct</span> sockaddr_in cliAddr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> sendSta;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>msg;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (argc <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;Usage: Not found Read File&#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">memset</span>(<span style="color:#f92672">&amp;</span>hints, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span>(hints));
</span></span><span style="display:flex;"><span>	hints.ai_family <span style="color:#f92672">=</span> AF_UNSPEC;
</span></span><span style="display:flex;"><span>	hints.ai_socktype <span style="color:#f92672">=</span> SOCK_STREAM;
</span></span><span style="display:flex;"><span>	hints.ai_flags <span style="color:#f92672">=</span> AI_PASSIVE;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	status <span style="color:#f92672">=</span> <span style="color:#a6e22e">getaddrinfo</span>(NULL, SERVPORT, <span style="color:#f92672">&amp;</span>hints, <span style="color:#f92672">&amp;</span>res);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (status <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">fprintf</span>(stderr, <span style="color:#e6db74">&#34;getaddrinfo, fail!&#34;</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	sockfd <span style="color:#f92672">=</span> <span style="color:#a6e22e">socket</span>(res<span style="color:#f92672">-&gt;</span>ai_family, res<span style="color:#f92672">-&gt;</span>ai_socktype, res<span style="color:#f92672">-&gt;</span>ai_protocol);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">bind</span>(sockfd, res<span style="color:#f92672">-&gt;</span>ai_addr, res<span style="color:#f92672">-&gt;</span>ai_addrlen);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">listen</span>(sockfd, <span style="color:#ae81ff">5</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;======== Please Wait Client =========</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">while</span>(<span style="color:#ae81ff">1</span>) { <span style="color:#75715e">// loop forever!
</span></span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">char</span> ipstr[INET_ADDRSTRLEN];
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>addr;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">int</span> len <span style="color:#f92672">=</span> <span style="color:#66d9ef">sizeof</span>(cliAddr);
</span></span><span style="display:flex;"><span>		connFd <span style="color:#f92672">=</span> <span style="color:#a6e22e">accept</span>(sockfd, (<span style="color:#66d9ef">struct</span> sockaddr <span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>cliAddr, <span style="color:#f92672">&amp;</span>len);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">/* View Client IP */</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">struct</span> sockaddr_in <span style="color:#f92672">*</span>ipv4 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">struct</span> sockaddr_in <span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>cliAddr;
</span></span><span style="display:flex;"><span>		addr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>(ipv4<span style="color:#f92672">-&gt;</span>sin_addr);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">inet_ntop</span>(AF_INET, addr, ipstr, <span style="color:#66d9ef">sizeof</span>(ipstr));
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;client: %s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, ipstr);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">/* Copy Data */</span>
</span></span><span style="display:flex;"><span>		msg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello world!&#34;</span>;
</span></span><span style="display:flex;"><span>		sendSta <span style="color:#f92672">=</span> <span style="color:#a6e22e">send</span>(connFd, msg, <span style="color:#a6e22e">strlen</span>(msg), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a6e22e">close</span>(connFd);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">close</span>(sockfd);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="ref">Ref</h1>
<ul>
<li><a href="https://beej.us/guide/bgnet/html/split/client-server-background.html">Beej’s Guide Network to Programming- chapter 6</a></li>
</ul> <a class="read-more" href="/csdn/post/c-bsd_socket/">&raquo;</a></p>
        
    </section>
    <footer class="post-meta">
        

        

        
        <time class="post-date" datetime="2023-02-14T00:08:08&#43;08:00">
            14 Feb 2023
        </time>
    </footer>
</article>

	

	<nav class="pagination" role="navigation">
	
	    <a class="newer-posts" href="/csdn/page/2/">&larr; Newer Posts</a>
	
	<span class="page-number">Page 3 of 12</span>
	
	    <a class="older-posts" href="/csdn/page/4/">Older Posts &rarr;</a>
	
</nav>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">迁移自(blog.csdn.net/xiaobin_HLJ80)</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/csdn/js/jquery.js"></script>
    <script type="text/javascript" src="/csdn/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/csdn/js/index.js"></script>
    
</body>
</html>
